# カスタムコンポーネント要件書

## 概要
CalcForm.tsxの実装において、画面イメージ「画面イメージ_Claude.png」が利用できなかったため、既存のUIパーツとMaterial-UI標準コンポーネントのみで実装しました。
本ドキュメントでは、実際の画面イメージと比較した際に必要となる可能性のあるカスタムコンポーネントを記載します。

## 現在の実装で使用しているコンポーネント

### 既存UIパーツ
- `Button` - 計算実行ボタン
- `ImportButton` - データインポートボタン
- `ExportButton` - データエクスポートボタン
- `TextField` - 各種入力フィールド
- `FileUpload` - ファイルアップロードフィールド
- `Layout/Form/Content` - フォームレイアウト
- `Record` - ラベルと入力フィールドのペア
- `RecordTitle` - セクションタイトル
- `Separator` - セクション間の区切り線

### Material-UI標準コンポーネント
- `Box`, `Stack`, `Grid2` - レイアウト
- `Paper` - セクションの背景
- `Typography` - テキスト表示
- `Divider` - 区切り線

## 必要となる可能性のあるカスタムコンポーネント

### 1. 計算結果表示パネル（ReadOnlyResultPanel）

#### 必要な理由
現在は通常のTextFieldを`readOnly`プロパティで読み取り専用にしていますが、画面イメージでは計算結果が特別なスタイルで表示されている可能性があります。

#### 期待する動作・見た目
- 読み取り専用の値を強調表示
- 大きめのフォントサイズ
- 明確な背景色（例：淡い青や緑）
- 数値のフォーマット（カンマ区切り、単位表示）
- アイコンによる視覚的な強調

#### 既存パーツとの違い
- TextFieldは入力用コンポーネントのため、読み取り専用表示には最適化されていない
- 数値のフォーマット機能がない
- 計算結果であることを視覚的に区別できない

#### 実装例
```tsx
<ReadOnlyResultPanel
  label="総費用"
  value={1000000}
  unit="円"
  icon={<MoneyIcon />}
  variant="success"
/>
```

---

### 2. FP計算サマリーカード（FPSummaryCard）

#### 必要な理由
画面イメージでFP計算の各項目と合計が、カード形式やグリッド形式で視覚的に整理されて表示されている場合。

#### 期待する動作・見た目
- FP値をカード形式で表示
- 各項目のアイコンまたは色分け
- 合計値を強調表示
- レスポンシブなグリッドレイアウト

#### 既存パーツとの違い
- Recordコンポーネントは表形式のため、カードレイアウトには不向き
- 項目ごとの視覚的な区別が弱い

---

### 3. 数値入力専用フィールド（NumberInputField）

#### 必要な理由
画面イメージで数値入力に特化したUIが使用されている場合。

#### 期待する動作・見た目
- 増減ボタン付き
- 単位表示（FP、円、月など）
- 入力値の範囲制限
- 数値フォーマット（カンマ区切り）

#### 既存パーツとの違い
- TextFieldは汎用的で、数値入力に特化していない
- 単位表示や増減ボタンがない

#### 実装例
```tsx
<NumberInputField
  name="externalInputFP"
  control={control}
  label="外部入力"
  unit="FP"
  min={0}
  step={1}
  showSteppers={true}
/>
```

---

### 4. 計算ボタングループ（CalculationButtonGroup）

#### 必要な理由
画面イメージで複数の計算関連ボタンが特別なレイアウトで配置されている場合。

#### 期待する動作・見た目
- 計算、クリア、リセットなどのボタンをグループ化
- アイコン付きボタン
- 強調色やサイズの統一

#### 既存パーツとの違い
- 現在はStackでボタンを並べているだけ
- ボタングループとしての視覚的統一感が弱い

---

### 5. セクションコンテナ（FormSection）

#### 必要な理由
画面イメージで各セクションに特別な装飾やアニメーションがある場合。

#### 期待する動作・見た目
- 折りたたみ可能なセクション
- アイコン付きタイトル
- 開閉アニメーション
- 必須マークや完了状態の表示

#### 既存パーツとの違い
- 現在はPaperで区切っているだけ
- インタラクティブな要素がない

#### 実装例
```tsx
<FormSection
  title="基本情報"
  icon={<InfoIcon />}
  collapsible={true}
  defaultExpanded={true}
  required={true}
>
  {/* セクション内容 */}
</FormSection>
```

---

### 6. 進捗インジケーター（ProgressIndicator）

#### 必要な理由
画面イメージでフォームの入力進捗を表示している場合。

#### 期待する動作・見た目
- ステップバー表示
- 各セクションの完了状態
- 現在のステップの強調

#### 既存パーツとの違い
- そのようなコンポーネントは既存パーツにない

---

### 7. 検証エラー表示パネル（ValidationErrorPanel）

#### 必要な理由
画面イメージでバリデーションエラーを一覧表示している場合。

#### 期待する動作・見た目
- エラーメッセージの一覧表示
- 該当フィールドへのジャンプリンク
- エラーアイコン
- 警告レベルの色分け

#### 既存パーツとの違い
- 現在はTextField個別にエラー表示
- 全体のエラーサマリーがない

---

## 実装優先度

画面イメージを確認後、以下の優先度で実装を検討してください：

### 優先度：高
1. ReadOnlyResultPanel - 計算結果の視認性向上
2. NumberInputField - 数値入力の使いやすさ向上

### 優先度：中
3. FPSummaryCard - FP計算の理解しやすさ向上
4. FormSection - フォームの整理

### 優先度：低
5. CalculationButtonGroup - UI統一感
6. ProgressIndicator - UX向上
7. ValidationErrorPanel - エラー確認の効率化

## 注意事項

- 実際の画面イメージを確認するまで、これらのコンポーネントの実装は保留してください
- 画面イメージで既存パーツで十分対応できる場合は、カスタムコンポーネントの実装は不要です
- 新規コンポーネントを作成する場合は、既存のUIパーツの設計思想に従ってください
  - react-hook-form対応
  - TypeScript strict mode対応
  - Material-UIとEmotionを使用
  - 適切なpropsインターフェースの定義

## 現在の実装の特徴

現在の実装は以下の機能を提供しています：

1. **基本情報入力**
   - 案件名（必須）
   - 案件種別
   - 生産性（FP/月）
   - 単価（円/月）

2. **FP計算**
   - 外部入力（EI）
   - 外部出力（EO）
   - 外部照会（EQ）
   - 内部論理ファイル（ILF）
   - 外部インターフェースファイル（EIF）
   - 合計FP（自動計算）

3. **計算結果表示**
   - 開発月数（自動計算）
   - 総費用（自動計算）

4. **その他機能**
   - 備考（複数行入力）
   - ファイルアップロード
   - インポート/エクスポート機能
   - 計算実行ボタン

5. **バリデーション**
   - 案件名：必須チェック
   - 数値項目：0以上の値チェック
   - 生産性：正の数チェック

これらの機能は既存のUIパーツのみで実装されており、TypeScriptエラー0件、ESLintエラー0件でビルドが成功しています。
